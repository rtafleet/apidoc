
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sa, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-c9d8fa83.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-953e3353.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-e9bde216.js"></script>

  </head>

  <body class="index" data-languages="[&quot;http&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-28d33cc4.png" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="http">http</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#overview-of-the-rta-api" class="toc-h1 toc-link" data-title="Overview of the RTA API">Overview of the RTA API</a>
          </li>
          <li>
            <a href="#get-access-tokens-to-call-the-rta-api" class="toc-h1 toc-link" data-title="Get access tokens to call the RTA API">Get access tokens to call the RTA API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#what-is-an-access-token-and-how-do-i-use-it" class="toc-h2 toc-link" data-title="What is an access token and how do I use it?">What is an access token and how do I use it?</a>
                  </li>
                  <li>
                    <a href="#what-are-the-rta-api-permissions" class="toc-h2 toc-link" data-title="What are the RTA API permissions?">What are the RTA API permissions?</a>
                  </li>
                  <li>
                    <a href="#where-does-my-app-get-an-access-token" class="toc-h2 toc-link" data-title="Where does my app get an access token?">Where does my app get an access token?</a>
                  </li>
                  <li>
                    <a href="#register-your-app-with-the-rta-api" class="toc-h2 toc-link" data-title="Register your app with the RTA API">Register your app with the RTA API</a>
                  </li>
                  <li>
                    <a href="#get-access-without-a-user" class="toc-h2 toc-link" data-title="Get access without a user">Get access without a user</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#permissions" class="toc-h1 toc-link" data-title="Permissions">Permissions</a>
          </li>
          <li>
            <a href="#code-samples" class="toc-h1 toc-link" data-title="Code Samples">Code Samples</a>
          </li>
          <li>
            <a href="#use-the-rta-api-version-2" class="toc-h1 toc-link" data-title="Use the RTA API Version 2">Use the RTA API Version 2</a>
          </li>
          <li>
            <a href="#use-the-rta-api-version-1" class="toc-h1 toc-link" data-title="Use the RTA API Version 1">Use the RTA API Version 1</a>
          </li>
          <li>
            <a href="#exploring-the-graphql-schema" class="toc-h1 toc-link" data-title="Exploring the GraphQL Schema">Exploring the GraphQL Schema</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#exploring-the-docs" class="toc-h2 toc-link" data-title="Exploring the Docs">Exploring the Docs</a>
                  </li>
                  <li>
                    <a href="#examples" class="toc-h2 toc-link" data-title="Examples">Examples</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
          <li>
            <a href="#paging" class="toc-h1 toc-link" data-title="Paging">Paging</a>
          </li>
          <li>
            <a href="#extracting-data-from-rta" class="toc-h1 toc-link" data-title="Extracting data from RTA">Extracting data from RTA</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#required-permission" class="toc-h2 toc-link" data-title="Required Permission">Required Permission</a>
                  </li>
                  <li>
                    <a href="#url-format-of-the-extract-api" class="toc-h2 toc-link" data-title="URL format of the extract API">URL format of the extract API</a>
                  </li>
                  <li>
                    <a href="#examples-calling-the-api" class="toc-h2 toc-link" data-title="Examples calling the API">Examples calling the API</a>
                  </li>
                  <li>
                    <a href="#retreive-the-first-1000-records" class="toc-h2 toc-link" data-title="Retreive the first 1000 records">Retreive the first 1000 records</a>
                  </li>
                  <li>
                    <a href="#retrieve-any-rows-modified-since-the-etag-12345" class="toc-h2 toc-link" data-title="Retrieve any rows modified since the etag 12345">Retrieve any rows modified since the etag 12345</a>
                  </li>
                  <li>
                    <a href="#errors-in-the-data-extract-api" class="toc-h2 toc-link" data-title="Errors in the data extract API">Errors in the data extract API</a>
                  </li>
              </ul>
          </li>
      </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='overview-of-the-rta-api'>Overview of the RTA API</h1>
<p>The RTA API is the gateway to data and intelligence in RTA Fleet Management software. You can use the RTA API to build apps for your organization and consumers that interact with the data in RTA Fleet Management software. With the RTA API, you can connect to a wealth of resources, relationships, and intelligence, all through a single endpoint: <code>https://api.rtafleet.com</code>.</p>
<h1 id='get-access-tokens-to-call-the-rta-api'>Get access tokens to call the RTA API</h1>
<p>To call the RTA API, your app must acquire an access token from Auth0, RTA&#39;s cloud identity service. The access token contains information (or claims) about your app and the permissions it has for the resources and APIs available through the RTA API. To get an access token, your app must be able to authenticate with Auth0 and be authorized by either a user or an administrator for access to the the RTA API resources it needs.</p>

<p>This topic provides an overview of access tokens, OAuth and how your app can get access tokens.</p>
<h2 id='what-is-an-access-token-and-how-do-i-use-it'>What is an access token and how do I use it?</h2>
<p>Access tokens issued by OAuth are base 64 encoded JSON Web Tokens (JWT). They contain information (claims) that the RTA APIs use to validate the caller and to ensure that the caller has the proper permissions to perform the operation they&#39;re requesting. When calling the RTA API, you can treat access tokens as opaque. You should always transmit access tokens over a secure channel, such as transport layer security (HTTPS).</p>

<p>Here&#39;s an example of an RTA access token:</p>

<p><code>eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6Ik9UWTVNVUk1TXpKQk9EWkdSVUU0TXpReVFURTVNRU0zTWpKQ05ESXlOa06T0VVek9URXdOdyJ9.eyJodHRwczovL2FwaS5ydGFmbGVldC5jb20vYXBwX21ldGFkYXRhIjp7InRlbmFudElkIjoiUlRBMDEyNjciLCJpZCI6Ikx1VUxUYU9CcTJhcjJzRlBiaHJMRmVROElQcklVNFoyIiwiaXNNYWNoaW5lMk1hY2hpbmUiOnRydWUsImRlc2t0b3BVc2VybmFtZSI6InN5c3RlbSJ9LCJpc3MiOiJodHRwczovL2Rldi1ydGEuYXV0aDAuY29tLyIsInN1YiI6Ix1VUxUYU9CcTJhcjJzRlBiaHJMRmVROElQcklVNFoyQGNsaWVudHMiLCJhdWQiOiJodHRwczovL3N0Zy5hcGkucnRhaGl2ZS5jb20iLCJpYXQiOjE1NDQ3MTUwNDYsImV4cCI6MTU0NzMwNzA0NiwiYXpwIjoiTHVVTFRhT0JxMmFyMnNGUGJockxGZVE4SVBySVU0WjIiLCJzY29wZSI6InBhcnRzOnZpZXciLCJndHkiOiJjbGllbnQtY3JlZGVudGlhbHMifQ.izNktviwQnmj4yl5mrXLvmdRNyRfJste6fryhmtmEtNacY3ehgEilrrjfpBAgqAhqV8efuB9nkO2x27Bn-P76RHaFYUd5bWHveNCcwRkyLrj51C9_EENpzsjhh1_PU1cDaG15Ruil0LunM_4zSJ_4XIaipHwdDtBx5LatSLqcf5yy2YsKD9pKDfSmIxkYkpiJz_xyUKFW96H45n2cXlgGFoz 2j8skLZITVKQwFp1yJ_CfxmlTkJZ9ZQIQpWUd2PVtzCVCNDq26FJbnJjKX45UhwSw3wb5v-S5sRkDzQl4WYDbRfAf3bCmPmpFrSstp2uvw3_CMvirENT2NE0KPIuGQ</code></p>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">HTTP/1.1
Authorization: Bearer eyJ0eXAiOiJKV1QiLC ... CMvirENT2NE0KPIuGQ
Host: api.rtafleet.com
</span><span class="nf">POST</span> <span class="nn">/graphql</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="s">{ "query": "{ getMe { id } }"}</span>
</code></pre></div>
<p>To call the RTA API, you attach the access token as a Bearer token to the Authorization header in an HTTP request. For example, here&#39;s a call that returns the profile information of the signed-in user (the access token has been truncated for readability)</p>
<h2 id='what-are-the-rta-api-permissions'>What are the RTA API permissions?</h2>
<p>The RTA API exposes a rich set of granular permissions over the resources it controls. These permissions are expressed as strings and grant apps access to the RTA API resources like vehicles, parts, work orders, purchase orders, etc. For example:</p>

<ul>
<li><em>vehicles:view</em> allows an app to read the vehicles in the RTA system.</li>
<li><em>parts:update</em> allows an app to update part details.</li>
</ul>

<p>There are two types of permissions:</p>

<ul>
<li>Delegated permissions are used by apps that run with a user present. The user&#39;s privileges are delegated to the app which makes calls on behalf of the user to the RTA API. Many of these permissions can be consented to by a user, but others require administrator consent.</li>
<li>Application permissions are used by apps that run without a user. These often grant an app broad privileges within an organization and always require the consent of an administrator.</li>
</ul>

<p>For a complete list of the RTA API permissions, as well as the differences between delegated and application permissions, see the <a href="#permissions">Permissions</a> reference.</p>
<h2 id='where-does-my-app-get-an-access-token'>Where does my app get an access token?</h2>
<p>Your app gets access tokens from Auth0, RTA&#39;s cloud identity service. To get an access token, your app exchanges HTTP requests and responses with Auth0 using industry-standard protocols defined in the OAuth 2.0 specification. These protocols describe the Auth0 endpoints and exchanges with them -- or authentication flows -- that your app uses to securely authenticate with Auth0 and get access tokens.</p>

<p>On a very simple level, to get an access token, your app exchanges HTTP requests with the following endpoints:</p>

<p>The /authorize endpoint, where your app can send a user to authenticate with Auth0 and consent to the permissions your app needs.
The /token endpoint where your app can get an access token once user consent has been granted.
(Note: These definitions are not rigid. Depending on the protocol your app uses, it may get access tokens directly from the /authorize endpoint or it may authenticate directly with the /token endpoint.)</p>

<p>Here&#39;s an example of one set of the /authorize and /token endpoints exposed by Auth0:</p>

<ul>
<li><code>https://rtafleet.auth0.com/authorize</code></li>
<li><code>https://rtafleet.auth0.com/token</code></li>
</ul>
<h2 id='register-your-app-with-the-rta-api'>Register your app with the RTA API</h2>
<p>Your app must be registered with RTA. Registering your app establishes a unique application ID and other values that your app uses to authenticate with Auth0 and get tokens. You register your app by <a href="https://app.rtafleet.com/admin/tenants/integrations/api-keys">creating an API Key on the RTA Web App</a>. More info can also be found <a href="https://docs.rtafleet.com/rta-manual/rta-api-keys/">here</a> Depending on the type of app you are developing, you will need to copy one or more properties during registration to use when you configure authentication and authorization for your app.</p>
<h2 id='get-access-without-a-user'>Get access without a user</h2>
<p>Some apps call the RTA API with their own identity and not on behalf of a user. In many cases, these are background services or daemons that run on a server without the presence of a signed-in user. An example of such an app might be a data extraction service that wakes up and runs overnight. In some cases, apps that have a signed-in user present may also need to call the RTA API under their own identity. For example, an app may need to use functionality that requires more elevated privileges in an organization than those carried by the signed-in user.</p>

<p>Apps that call the RTA API with their own identity use the OAuth 2.0 client credentials grant flow to get access tokens from Auth0. In this topic, we will walk through the basic steps to configure a service and use the OAuth client credentials grant flow to get an access token.</p>
<h3 id='authentication-and-authorization-steps'>Authentication and authorization steps</h3>
<p>The basic steps required to configure a service and get a token from the Azure AD v2.0 endpoint that your service can use to call the RTA API under its own identity are:</p>

<ol>
<li>Register your app.</li>
<li>Configure permissions for the RTA API on your app.</li>
<li>Get an access token.</li>
<li>Use the access token to call the RTA API.</li>
</ol>
<h3 id='get-an-access-token'>Get an access token</h3>
<p>In the OAuth 2.0 client credentials grant flow, you use the Application ID and Application Secret values that you saved when you registered your app to request an access token directly from the Azure AD v2.0 /token endpoint.</p>

<aside class="notice">
You must replace the values for `client_id` and `client_secret` with your personal Application ID and Application Secret values.
</aside>

<blockquote>
<p>Get access token</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/oauth/token</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">rtafleet.auth0.com</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">cache-control</span><span class="p">:</span> <span class="s">no-cache</span>
<span class="s">{</span>
<span class="s">  "audience": "https://api.rtahive.com",</span>
<span class="s">  "grant_type": "client_credentials",</span>
<span class="s">  "client_id": "LuULTaO2sFPbhrLFe...PrIU4Z2",</span>
<span class="s">  "client_secret": "jsAt0vbpF3...Gqu-LYMOq0y7tYOrFyKABDovFMuZMMCfgIB"</span>
<span class="s">}</span>
</code></pre></div>
<p>You send a POST request to the /token endpoint to acquire an access token.</p>

<ul>
<li><code>audience</code>: Must be <code>https://api.rtahive.com</code></li>
<li><code>client_id</code>: The Application ID that the RTA Support team assigned when you registered your app.</li>
<li><code>client_secret</code>: The Application Secret that was generated for your app by the support team.</li>
<li><code>grant_type</code>: Must be <code>client_credentials</code></li>
</ul>

<blockquote>
<p>A successful response looks like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6Ik9UWTVNVUk1TXpKQk9EWkdSVUU..."</span><span class="p">,</span><span class="w">
  </span><span class="nl">"scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"parts:view"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"expires_in"</span><span class="p">:</span><span class="w"> </span><span class="mi">2592000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bearer"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>A successful response contains the following:</p>

<ul>
<li><code>access_token</code>: The requested access token. Your app can use this token in calls to the RTA API.</li>
<li><code>scope</code>: This value contains all the application permissions you have configured for your app.</li>
<li><code>token_type</code>: Indicates the token type value. The only type that Azure AD supports is bearer.</li>
<li><code>expires_in</code>: How long the access token is valid (in seconds).</li>
</ul>
<h3 id='supported-app-scenarios-and-resources'>Supported app scenarios and resources</h3>
<p>Apps that call the RTA API under their own identity fall into one of two categories:</p>

<ul>
<li>Background services (daemons) that run on a server without a signed-in user.</li>
<li>Apps that have a signed-in user but also call the RTA API with their own identity; for example, to use functionality that requires more elevated privileges than those of the user.</li>
<li>Apps that call the RTA API with their own identity use the OAuth 2.0 client credentials grant to authenticate with Azure AD and get a token.</li>
</ul>
<h1 id='permissions'>Permissions</h1>
<p>Permissions in RTA are enforced based on Application identity accessing the API. A list of applications can be found in the RTA Web App when editing an API Key <a href="https://app.rtafleet.com/admin/tenants/integrations/api-keys">here</a></p>
<h1 id='code-samples'>Code Samples</h1>
<p>Code samples that demonstrate using the RTA API are available in the <a href="https://github.com/rtafleet/developer-samples">RTA Developer Samples GitHub repository</a>.</p>
<h1 id='use-the-rta-api-version-2'>Use the RTA API Version 2</h1>
<p>There are 2 versions of the RTA API.  The first version is what a majority of these docs pertain to, our graphql api.</p>

<p>Our version 2 api docs can be found <a href="https://api.momentum-prd.rtafleet.com/api">here</a></p>

<p>Authentication is handled the same as the version 1 api, though a token CAN be generated through the version 2 api via the following endpoint:
<a href="https://api.momentum-prd.rtafleet.com/api/#/Information%20Management%20%3E%20Integrations/getApiToken">getApiToken</a></p>
<h1 id='use-the-rta-api-version-1'>Use the RTA API Version 1</h1>
<p>The RTA API is a <a href="https://graphql.org/">GraphQL</a> web API that enables you to access RTA API service resources. After you register your app and get authentication tokens for a user or service, you can make requests to the RTA API.</p>

<p><code>https://api.rtafleet.com/graphql</code></p>

<blockquote>
<p>Request body format</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
  </span><span class="nl">"operationName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
  </span><span class="nl">"variables"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"myVariable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"someValue"</span><span class="p">,</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>The components of a request include:</p>

<ul>
<li>HTTP method - For RTA API, this will always be <code>POST</code></li>
<li>Content type: <code>application/json</code></li>
<li>Body: JSON-encoded body of the following form:</li>
</ul>

<p>After you make a request, a response is returned that includes:</p>

<blockquote>
<p>Response data format</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="nl">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<ul>
<li>Status code - An HTTP status code that indicates success or failure. For details about HTTP error codes, see Errors.</li>
<li>data - The data that you requested or the result of the operation. The response message can be empty for some operations. If your request returns a lot of data, you need to page through it. For details, see <a href="#paging">Paging</a>.</li>
<li>errors - Any errors that occur will be included.</li>
</ul>

<p>A query might result in some data and some errors, and those should be returned in a JSON object of the form:</p>

<p>If there were no errors returned, the &quot;errors&quot; field should not be present on the response.</p>

<blockquote>
<p>Sample request and response to retrieve user profile and permissions</p>

<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">query</span> <span class="nx">fetchMe</span> <span class="p">{</span>
  <span class="nx">getMe</span> <span class="p">{</span>
    <span class="nx">id</span>
    <span class="nx">status</span><span class="p">{</span>
      <span class="nx">code</span>
      <span class="nx">state</span>
    <span class="p">}</span>
    <span class="nx">permissions</span> <span class="p">{</span>
      <span class="nx">tenantId</span>
      <span class="nx">facilityId</span>
      <span class="nx">permission</span>
    <span class="p">}</span>
    <span class="nx">tenants</span> <span class="p">{</span>
      <span class="nx">id</span>
      <span class="nx">name</span>
      <span class="nx">roles</span> <span class="p">{</span>
        <span class="nx">id</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"getMe"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LuULTaOBq2ar2rLFeQ8IPrIU4Z2"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"permissions"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nl">"tenants"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RTA99999"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RTA Sample Customer"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"roles"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h1 id='exploring-the-graphql-schema'>Exploring the GraphQL Schema</h1>
<ol>
<li>Visit <code>https://graphqlbin.com</code>.</li>
<li>Select <strong>URL ENDPOINT</strong> and enter the Endpoint url for the RTA API: <code>https://api.rtafleet.com/graphql</code>.</li>
</ol>
<h3 id='exploring-the-docs'>Exploring the Docs</h3>
<p>On the right side of GraphQL Playground, you will find a tab called <strong>DOCS</strong> which you an use to explore the queries and mutations available in the RTA API.</p>
<h3 id='examples'>Examples</h3><h4 id='example-1-querying-basic-tenant-information'>Example 1: Querying basic tenant information</h4>
<blockquote>
<p>Request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
  <span class="nx">getTenant</span><span class="p">(</span><span class="nx">input</span><span class="p">:</span> <span class="p">{</span> <span class="nl">id</span><span class="p">:</span> <span class="dl">"</span><span class="s2">RTACAN01</span><span class="dl">"</span> <span class="p">})</span> <span class="p">{</span>
    <span class="nx">id</span>
    <span class="nx">name</span>
    <span class="nx">entitlements</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>This sample demonstrates how to retrieve basic tenant information. Notice how GraphQL allows the developer to specify the exact data required in the response.</p>

<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"getTenant"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RTACAN01"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RTA Canary 01"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"entitlements"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<!--
#### Example 2: Querying current user information, including the id, name, and RTA desktop username the account is impersonating

> Request

```javascript
{
  getMe {
    id
    email
    firstName
    lastName
    tenants {
      id
      name
      username
    }
  }
}
```

> Response

```json
{
  "data": {
    "getMe": {
      "id": "0wrXTJ5KmgquF7mZA4ZF112LB1PLzOsW",
      "email": null,
      "firstName": null,
      "lastName": null,
      "tenants": [
        {
          "id": "RTACAN01",
          "name": "RTA Canary 01",
          "username": "system"
        }
      ]
    }
  }
}
``` -->
<h1 id='errors'>Errors</h1><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="nl">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>The RTA API returns error information as part of the response. A query might result in some data and some errors, and those should be returned in a JSON object of the form shown at the right.</p>

<blockquote>
<p>Sample invalid request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">query</span> <span class="p">{</span>
  <span class="nx">getParts</span><span class="p">(</span><span class="nx">input</span><span class="p">:</span> <span class="p">{</span><span class="nl">tenantId</span><span class="p">:</span> <span class="dl">"</span><span class="s2">INVALID_ID</span><span class="dl">"</span><span class="p">,</span> <span class="nx">facilityId</span><span class="p">:</span> <span class="dl">"</span><span class="s2">200</span><span class="dl">"</span><span class="p">})</span> <span class="p">{</span>
    <span class="nx">parts</span> <span class="p">{</span>
      <span class="nx">id</span>
      <span class="nx">partNumber</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>If there were no errors returned, the &quot;errors&quot; field will not be present on the response.</p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>message</code></td>
<td>The error message.</td>
</tr>
<tr>
<td><code>extensions</code></td>
<td>Additional information about the error.</td>
</tr>
<tr>
<td><code>exception</code></td>
<td>Exception/Error details.</td>
</tr>
<tr>
<td><code>requiredPermission</code></td>
<td>The permission required to execute the requested operation.</td>
</tr>
</tbody></table>

<blockquote>
<p>Sample error response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Missing required </span><span class="se">\"</span><span class="s2">parts:view</span><span class="se">\"</span><span class="s2"> permission."</span><span class="p">,</span><span class="w">
      </span><span class="nl">"locations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"line"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
          </span><span class="nl">"column"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"getParts"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"extensions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"API.MISSING_PERMISSION_PARTS_VIEW"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"exception"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"API.MISSING_PERMISSION_PARTS_VIEW"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MISSING_REQUIRED_PERMISSION"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Missing required </span><span class="se">\"</span><span class="s2">parts:view</span><span class="se">\"</span><span class="s2"> permission."</span><span class="p">,</span><span class="w">
          </span><span class="nl">"tokens"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"requiredPermission"</span><span class="p">:</span><span class="w"> </span><span class="s2">"parts:view"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"ctx"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"awsRequestId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a1772866-ffbe-11e8-bd7e-b91d02e81301"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"correlationId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a15b14c4-ffbe-11e8-bc70-19caf995b12d"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"getPartsGraphql"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-12-14T16:38:05+00:00"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"fetchPartsApi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-12-14T16:38:05+00:00"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h1 id='paging'>Paging</h1>
<p>Paging of records is handled as part of the request to any of the plural methods in the RTA API using the <code>queryOptions.pagination</code> element in the GraphQL query.</p>

<p>When a response is returned, a set of <code>meta</code> data is supplied which provides additional pagination information indicating the current <code>page</code>, <code>totalPages</code>, <code>totalRecords</code>, current <code>offset</code> and current <code>limit</code></p>

<p>Terms</p>

<table><thead>
<tr>
<th>Term</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td><code>offset</code></td>
<td>The number of records to skip. This is a zero-based number meaning that the first record is represented by the number 0; the tenth record by the number 9.</td>
</tr>
<tr>
<td><code>limit</code></td>
<td>The maximum number of records to return in the query.</td>
</tr>
<tr>
<td><code>page</code></td>
<td>The current page number.</td>
</tr>
<tr>
<td><code>totalPages</code></td>
<td>The total number of pages given the current <code>limit</code>.</td>
</tr>
<tr>
<td><code>totalRecords</code></td>
<td>The total number of records available.</td>
</tr>
</tbody></table>

<blockquote>
<p>Paged result request</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">query</span> <span class="p">{</span>
  <span class="nx">getParts</span><span class="p">(</span><span class="nx">input</span><span class="p">:</span> <span class="p">{</span>
      <span class="nl">tenantId</span><span class="p">:</span> <span class="dl">"</span><span class="s2">RTA99999</span><span class="dl">"</span><span class="p">,</span>
      <span class="nx">facilityId</span><span class="p">:</span> <span class="dl">"</span><span class="s2">200</span><span class="dl">"</span><span class="p">,</span>
      <span class="nx">queryOptions</span><span class="p">:</span> <span class="p">{</span>
          <span class="nl">pagination</span><span class="p">:</span> <span class="p">{</span>
              <span class="na">offset</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
              <span class="na">limit</span><span class="p">:</span> <span class="mi">50</span>
              <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">})</span> <span class="p">{</span>
    <span class="nx">parts</span> <span class="p">{</span>
      <span class="nx">id</span>
      <span class="nx">partNumber</span>
      <span class="nx">description</span>
      <span class="nx">meanCost</span>
      <span class="nx">sellingPrice</span>
    <span class="p">}</span>
    <span class="nx">meta</span> <span class="p">{</span>
      <span class="nx">page</span>
      <span class="nx">totalPages</span>
      <span class="nx">totalRecords</span>
      <span class="nx">offset</span>
      <span class="nx">limit</span>
      <span class="nx">sort</span> <span class="p">{</span>
        <span class="nx">sortBy</span>
        <span class="nx">sortOrder</span>
      <span class="p">}</span>
      <span class="nx">searchMeta</span> <span class="p">{</span>
        <span class="nx">id</span>
        <span class="nx">relevancy</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<blockquote>
<p>Response, results truncated for brevity</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"getParts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"parts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00096F4A5EB1A82C67F6BD8DFE9744BB"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"partNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10W30"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10W30 Motor Oil"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"meanCost"</span><span class="p">:</span><span class="w"> </span><span class="mf">2.43</span><span class="p">,</span><span class="w">
          </span><span class="nl">"sellingPrice"</span><span class="p">:</span><span class="w"> </span><span class="mf">3.43</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"000A87043FAC8438CDF312974E95CCB2"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"partNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"D1770"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Brake Pads - Front"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"meanCost"</span><span class="p">:</span><span class="w"> </span><span class="mf">21.5</span><span class="p">,</span><span class="w">
          </span><span class="nl">"sellingPrice"</span><span class="p">:</span><span class="w"> </span><span class="mf">37.99</span><span class="w">
        </span><span class="p">}</span><span class="w">
        </span><span class="err">...</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"page"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"totalPages"</span><span class="p">:</span><span class="w"> </span><span class="mi">74</span><span class="p">,</span><span class="w">
        </span><span class="nl">"totalRecords"</span><span class="p">:</span><span class="w"> </span><span class="mi">3698</span><span class="p">,</span><span class="w">
        </span><span class="nl">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
        </span><span class="nl">"sort"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"sortBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"id"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"sortOrder"</span><span class="p">:</span><span class="w"> </span><span class="s2">"asc"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"searchMeta"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h1 id='extracting-data-from-rta'>Extracting data from RTA</h1>
<p>RTA has built a simple REST API for extracting useful data directly from the RTA database. This is useful for customers who need direct access to the raw, unformatted data for use in data warehousing and other utility projects.</p>

<p>The data returned represents the actual physical column names in the database.</p>

<p>The data extract API can be used by first obtaining an access token as descrbed in this documentation. The access token is then used as a bearer token in the <code>authorization</code> header.</p>
<h3 id='required-permission'>Required Permission</h3>
<p>A special API permission has been created to allow use of the data extract API. We recommend tighly controlling and securing the client id and client secret when granted this permission because anyone with these credentials will have full read access to all of the data in your database.</p>

<table><thead>
<tr>
<th>Permission Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>api:extractTable</td>
<td>gives full read access to all tables in the customer database</td>
</tr>
</tbody></table>

<aside class="notice">

<p><b>A note on etags</b></p>

<p>The data extract API makes extensive use of etags. An etag is simply a text value in a table row that automatically increments whenever any column in the row is updated. The etag is similar to a date/time stamp, without the complexity of dates and times. Using the etag allows you to request only the latest changes since the last time you retrieved the data from the server so that you can periodically request small sets of data from the RTA API.</p>
</aside>
<h2 id='url-format-of-the-extract-api'>URL format of the extract API</h2>
<p>Use the following URL to access the data extract API.</p>

<p>URL: <code>https://api.rtafleet.com/v0/extract/&lt;tablename&gt;?etag=&lt;etag&gt;&amp;limit=&lt;limit&gt;</code></p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>tablename</code></td>
<td>The name of the actual table in the RTA database. To obtain the table names you may request the data dictionary by contacting support@rtafleet.com</td>
</tr>
<tr>
<td><code>etag</code></td>
<td>The first etag value to return</td>
</tr>
<tr>
<td><code>limit</code></td>
<td>limit is not required, has a max of 1000 and defaults to 1000.  If you choose to get your data in increments of 100, you could set limit=100.</td>
</tr>
</tbody></table>
<h2 id='examples-calling-the-api'>Examples calling the API</h2>
<p>See the example at the right for the format of the data returned from the API.</p>

<blockquote>
<p>The resulting object is:</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
    <span class="dl">"</span><span class="s2">count</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">value</span><span class="dl">"</span> <span class="p">:</span> <span class="p">[</span><span class="nx">the</span> <span class="nx">rows</span> <span class="k">from</span> <span class="nx">the</span> <span class="nx">table</span> <span class="nx">sorted</span> <span class="nx">by</span> <span class="nx">etag</span><span class="p">],</span>
     <span class="dl">"</span><span class="s2">nextEtag</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">12344</span><span class="dl">"</span>
<span class="p">}</span>
</code></pre></div>
<p>where <code>nextEtag</code> would be the very next etag value to use.  nextEtag is not returned if you have received all the rows in the table.</p>
<h2 id='retreive-the-first-1000-records'>Retreive the first 1000 records</h2>
<blockquote>
<p>Example retrieving records from <code>vehfile</code></p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">curl --request GET \
  --url "https://api.rtafleet.com/v0/extract/vehfile?etag=0&amp;limit=1000" \
  --header "authorization: Bearer $AUTH_TOKEN"
</span></code></pre></div>
<blockquote>
<p>Sample reponse from <code>vehfile</code></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
    <span class="dl">"</span><span class="s2">count</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">1000</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">value</span><span class="dl">"</span><span class="p">:[</span>
        <span class="p">{</span><span class="nx">FIRST</span> <span class="nx">RECORD</span> <span class="nx">IN</span> <span class="nx">TABLE</span><span class="p">},</span>
        <span class="p">...,</span>
        <span class="p">{</span><span class="mi">1000</span><span class="nx">th</span> <span class="nx">RECORD</span> <span class="nx">IN</span> <span class="nx">TABLE</span><span class="p">}</span>
    <span class="p">],</span>
    <span class="dl">"</span><span class="s2">nextEtag</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">12345</span><span class="dl">"</span>
<span class="p">}</span>
</code></pre></div>
<p>See the example CURL request at the right to retrieve the first 1000 records from the vehilces table <code>vehfile</code>.</p>
<h2 id='retrieve-any-rows-modified-since-the-etag-12345'>Retrieve any rows modified since the etag 12345</h2>
<blockquote>
<p>Sample request with etag</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">curl --request GET \
  --url "https://api.rtafleet.com/v0/extract/vehfile?etag=12345&amp;limit=1000" \
  --header "authorization: Bearer $AUTH_TOKEN"
</span></code></pre></div>
<blockquote>
<p>Sample response without nextEtag</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
    <span class="dl">"</span><span class="s2">count</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">50</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">value</span><span class="dl">"</span><span class="p">:[</span>
        <span class="p">{</span><span class="mi">1001</span><span class="nx">th</span> <span class="nx">RECORD</span> <span class="nx">IN</span> <span class="nx">TABLE</span><span class="p">},</span>
        <span class="p">...,</span>
        <span class="p">{</span><span class="mi">1051</span><span class="nx">th</span> <span class="nx">RECORD</span> <span class="nx">IN</span> <span class="nx">TABLE</span><span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p>See the example CURL request at the right to retrieve anything that has been created or modified since the etag of 12345 has been retrieved.</p>

<p>Because nextEtag was not returned, there are no more rows to retrieve.</p>
<h2 id='errors-in-the-data-extract-api'>Errors in the data extract API</h2>
<p>If you supply an invalid tablename, you will receive a 404 error.</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="http">http</a>
          </div>
      </div>
    </div>
  </body>
</html>
